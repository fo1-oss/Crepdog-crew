import{r as x,a as Se,R as De}from"./vendor-wGySg1uH.js";import{i as ze,g as Ae,a as Me,G as Ee,s as Re,b as Fe,c as Le,d as q,e as _,f as se,q as te,l as je,o as ae,h as ce,j as Pe,u as Te,k as H,m as Oe}from"./firebase-DuljpV7L.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))d(m);new MutationObserver(m=>{for(const o of m)if(o.type==="childList")for(const y of o.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&d(y)}).observe(document,{childList:!0,subtree:!0});function l(m){const o={};return m.integrity&&(o.integrity=m.integrity),m.referrerPolicy&&(o.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?o.credentials="include":m.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function d(m){if(m.ep)return;m.ep=!0;const o=l(m);fetch(m.href,o)}})();var ye={exports:{}},W={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ie=x,_e=Symbol.for("react.element"),Ve=Symbol.for("react.fragment"),$e=Object.prototype.hasOwnProperty,He=Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qe={key:!0,ref:!0,__self:!0,__source:!0};function ve(t,c,l){var d,m={},o=null,y=null;l!==void 0&&(o=""+l),c.key!==void 0&&(o=""+c.key),c.ref!==void 0&&(y=c.ref);for(d in c)$e.call(c,d)&&!qe.hasOwnProperty(d)&&(m[d]=c[d]);if(t&&t.defaultProps)for(d in c=t.defaultProps,c)m[d]===void 0&&(m[d]=c[d]);return{$$typeof:_e,type:t,key:o,ref:y,props:m,_owner:He.current}}W.Fragment=Ve;W.jsx=ve;W.jsxs=ve;ye.exports=W;var e=ye.exports,K={},le=Se;K.createRoot=le.createRoot,K.hydrateRoot=le.hydrateRoot;const Ue={apiKey:"AIzaSyCyxLtijhq50ZTAQsy0P1GIInHtmstc88o",authDomain:"dataroom-dash.firebaseapp.com",projectId:"dataroom-dash",storageBucket:"dataroom-dash.firebasestorage.app",messagingSenderId:"492179105967",appId:"1:492179105967:web:8cf362026b856d7168cc5a"},ge=ze(Ue),Y=Ae(ge),P=Me(ge),Be=new Ee,Ge=["admin@crepdogcrew.com","anchit@crepdogcrew.com","fo1@crepdogcrew.com"],We="AIzaSyBZqCLdYagBqTKRlzfcZjkHvRiNPbc8jIU",re={PITCH_DECK:"16dEnuE4Aml9asy6tmn3a8AqtRUn08PTE",MIS:"1hJVr0xzckP_iSMZekXmkAGm_IaGmyHNU",AUDITED_FINANCIALS:"138WYK9a_5kOLRkVCSllR8fD-peJ8JvrG"},Ye=(t,c)=>Re(Y,t,c),Ke=()=>Fe(Y,Be),Ze=()=>Le(Y),Qe=async(t,c)=>{const l=q(_(P,"sessions"));return await se(l,{userId:t,...c,createdAt:H()}),l.id},ie=async(t,c)=>{const l=q(_(P,"activities"));await se(l,{userId:t,...c,timestamp:H()})},Je=async()=>{const t=_(P,"sessions"),c=te(t,ae("createdAt","desc"),je(100));return(await ce(c)).docs.map(d=>({id:d.id,...d.data()}))},Xe=async()=>{const t=_(P,"activities"),c=te(t,ae("timestamp","desc"),je(200));return(await ce(c)).docs.map(d=>({id:d.id,...d.data()}))},ne=async t=>{const c=q(_(P,"dataCards"));return await se(c,{...t,createdAt:H(),updatedAt:H()}),c.id},es=async(t,c)=>{const l=q(P,"dataCards",t);await Te(l,{...c,updatedAt:H()})},ss=async t=>{const c=q(P,"dataCards",t);await Pe(c)},de=async()=>{const t=_(P,"dataCards"),c=te(t,ae("createdAt","desc"));return(await ce(c)).docs.map(d=>({id:d.id,...d.data()}))};var ts={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const as=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cs=(t,c)=>{const l=x.forwardRef(({color:d="currentColor",size:m=24,strokeWidth:o=2,absoluteStrokeWidth:y,children:b,...v},C)=>x.createElement("svg",{ref:C,...ts,width:m,height:m,stroke:d,strokeWidth:y?Number(o)*24/Number(m):o,className:`lucide lucide-${as(t)}`,...v},[...c.map(([p,k])=>x.createElement(p,k)),...(Array.isArray(b)?b:[b])||[]]));return l.displayName=`${t}`,l};var f=cs;const Z=f("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Q=f("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),oe=f("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),be=f("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),ls=f("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),G=f("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),me=f("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),rs=f("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),is=f("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ne=f("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]),$=f("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),xe=f("FolderOpen",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}]]),ns=f("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),ds=f("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]]),we=f("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),he=f("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),os=f("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),ms=f("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),pe=f("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),J=f("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),xs=f("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),I=f("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),hs=f("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),U=f("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]),ps=f("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),X=f("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),ee=f("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),us=f("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),ke=f("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Ce=f("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),B=f("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ue=t=>t?(t.toDate?t.toDate():new Date(t)).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",fe=t=>t?t<60?`${t}s`:t<3600?`${Math.floor(t/60)}m ${t%60}s`:`${Math.floor(t/3600)}h ${Math.floor(t%3600/60)}m`:"0s",fs=async()=>{const t=document.createElement("canvas"),c=t.getContext("2d");return c.textBaseline="top",c.font="14px Arial",c.fillText("CDC Fingerprint",2,2),t.toDataURL().slice(-50)},js=async()=>{try{return await(await fetch("https://ipapi.co/json/")).json()}catch{return{city:"Unknown",country:"Unknown",ip:"Unknown"}}},ys=({onLogin:t})=>{const[c,l]=x.useState(""),[d,m]=x.useState(""),[o,y]=x.useState(!1),[b,v]=x.useState(""),[C,p]=x.useState(!1),[k,z]=x.useState("investor"),E=async D=>{D.preventDefault(),v(""),p(!0);try{await Ye(c,d)}catch(F){v(F.message.includes("invalid")?"Invalid email or password":F.message)}finally{p(!1)}},A=async()=>{v(""),p(!0);try{await Ke()}catch{v("Google sign-in failed. Please try again.")}finally{p(!1)}};return e.jsxs("div",{className:"min-h-screen bg-cdc-dark bg-pattern flex items-center justify-center p-4",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-cdc-lime/5 rounded-full blur-3xl animate-pulse-slow"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-cdc-olive/10 rounded-full blur-3xl animate-pulse-slow",style:{animationDelay:"1s"}})]}),e.jsxs("div",{className:"w-full max-w-md relative z-10",children:[e.jsxs("div",{className:"text-center mb-8 animate-slide-up",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-2xl bg-gradient-to-br from-cdc-lime to-cdc-lime-dark mb-4 glow-lime",children:e.jsx("span",{className:"font-display text-4xl text-cdc-dark",children:"CDC"})}),e.jsx("h1",{className:"font-display text-4xl text-cdc-cream tracking-wide",children:"INVESTOR DATA ROOM"}),e.jsx("p",{className:"text-cdc-cream/50 mt-2",children:"Premium Sneaker & Streetwear Investment Portal"})]}),e.jsxs("div",{className:"glass rounded-2xl p-8 glow-lime animate-slide-up",style:{animationDelay:"0.1s"},children:[e.jsxs("div",{className:"flex bg-cdc-dark/50 rounded-lg p-1 mb-6",children:[e.jsx("button",{onClick:()=>z("investor"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-300 ${k==="investor"?"bg-cdc-lime text-cdc-dark":"text-cdc-cream/60 hover:text-cdc-cream"}`,children:"Investor Access"}),e.jsx("button",{onClick:()=>z("admin"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-300 ${k==="admin"?"bg-cdc-lime text-cdc-dark":"text-cdc-cream/60 hover:text-cdc-cream"}`,children:"Admin Portal"})]}),k==="admin"&&e.jsx("div",{className:"mb-6 p-4 bg-cdc-olive/20 rounded-lg border border-cdc-lime/20",children:e.jsxs("p",{className:"text-sm text-cdc-cream/70 flex items-center gap-2",children:[e.jsx(he,{size:14,className:"text-cdc-lime"}),"Admin access for authorized personnel only"]})}),b&&e.jsxs("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-lg flex items-center gap-3 animate-slide-down",children:[e.jsx(Q,{className:"text-red-400",size:20}),e.jsx("span",{className:"text-red-400 text-sm",children:b})]}),e.jsxs("form",{onSubmit:E,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cdc-cream/70 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(ms,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-cdc-cream/40",size:18}),e.jsx("input",{type:"email",value:c,onChange:D=>l(D.target.value),placeholder:k==="admin"?"admin@crepdogcrew.com":"investor@company.com",className:"input-field pl-12",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cdc-cream/70 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(he,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-cdc-cream/40",size:18}),e.jsx("input",{type:o?"text":"password",value:d,onChange:D=>m(D.target.value),placeholder:"Enter your password",className:"input-field pl-12 pr-12",required:!0}),e.jsx("button",{type:"button",onClick:()=>y(!o),className:"absolute right-4 top-1/2 -translate-y-1/2 text-cdc-cream/40 hover:text-cdc-lime transition-colors",children:o?e.jsx(rs,{size:18}):e.jsx(is,{size:18})})]})]}),e.jsx("button",{type:"submit",disabled:C,className:"w-full btn-primary flex items-center justify-center gap-2",children:C?e.jsx(we,{className:"animate-spin",size:20}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{size:18}),"Sign In with Email"]})})]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-cdc-olive/30"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-transparent text-cdc-cream/40",children:"or continue with"})})]}),e.jsxs("button",{onClick:A,disabled:C,className:"w-full btn-secondary flex items-center justify-center gap-3",children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),k==="investor"&&e.jsxs("p",{className:"mt-6 text-center text-xs text-cdc-cream/40",children:["By signing in, you agree to our Terms of Service and Privacy Policy.",e.jsx("br",{}),"All activity is tracked for security purposes."]})]}),e.jsx("p",{className:"text-center text-cdc-cream/30 text-xs mt-6 animate-fade-in",style:{animationDelay:"0.3s"},children:"© 2024 Crepdog Crew. All rights reserved."})]})]})},vs=({onDataExtracted:t,onClose:c})=>{const[l,d]=x.useState([]),[m,o]=x.useState(!1),[y,b]=x.useState(0),[v,C]=x.useState([]),[p,k]=x.useState(null),[z,E]=x.useState(!1),A=x.useRef(null),D=a=>{a.preventDefault(),a.stopPropagation(),a.type==="dragenter"||a.type==="dragover"?E(!0):a.type==="dragleave"&&E(!1)},F=a=>{a.preventDefault(),a.stopPropagation(),E(!1);const h=Array.from(a.dataTransfer.files).filter(r=>r.type==="application/pdf"||r.type.includes("spreadsheet")||r.type.includes("excel")||r.name.endsWith(".xlsx")||r.name.endsWith(".xls")||r.name.endsWith(".csv"));d(r=>[...r,...h])},V=a=>{const h=Array.from(a.target.files);d(r=>[...r,...h])},T=a=>{d(h=>h.filter((r,j)=>j!==a))},i=async()=>{o(!0),b(0);const a=[];for(let h=0;h<l.length;h++){const r=l[h];b(Math.round((h+.5)/l.length*100));try{let j;r.type==="application/pdf"?j=await n(r):j=await g(r),a.push({fileName:r.name,fileType:r.type,fileSize:r.size,extractedAt:new Date().toISOString(),data:j,status:"success"})}catch(j){a.push({fileName:r.name,fileType:r.type,fileSize:r.size,extractedAt:new Date().toISOString(),error:j.message,status:"error"})}b(Math.round((h+1)/l.length*100))}C(a),o(!1),a.length>0&&k(0)},n=async a=>new Promise(h=>{const r=new FileReader;r.onload=async()=>{await new Promise(j=>setTimeout(j,1500)),h({type:"pdf",pages:Math.floor(Math.random()*10)+1,text:`Extracted content from ${a.name}:

Revenue FY24: ₹18.2 Cr
YoY Growth: 114%
LTV:CAC Ratio: 62:1
Gross Margin: 45%
Store Locations: Delhi, Mumbai, Hyderabad
`,tables:[{name:"Financial Summary",headers:["Metric","FY23","FY24","Growth"],rows:[["Revenue","₹8.5 Cr","₹18.2 Cr","114%"],["Orders","12,450","28,900","132%"],["AOV","₹6,827","₹6,297","-8%"],["Customers","8,200","19,500","138%"]]}],metadata:{author:"Crepdog Crew",created:new Date().toISOString()}})},r.readAsArrayBuffer(a)}),g=async a=>new Promise(h=>{const r=new FileReader;r.onload=async()=>{await new Promise(j=>setTimeout(j,1e3)),h({type:"excel",sheets:["Summary","Transactions","Inventory"],data:{Summary:{headers:["Category","Q1","Q2","Q3","Q4"],rows:[["Sneakers","₹2.1 Cr","₹2.8 Cr","₹3.2 Cr","₹4.1 Cr"],["Streetwear","₹0.8 Cr","₹1.1 Cr","₹1.4 Cr","₹1.8 Cr"],["Accessories","₹0.3 Cr","₹0.4 Cr","₹0.5 Cr","₹0.7 Cr"]]}},totalRows:1250,totalColumns:12})},r.readAsArrayBuffer(a)}),M=a=>{t&&t(a)};return e.jsx("div",{className:"fixed inset-0 bg-cdc-dark/95 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-5xl max-h-[90vh] bg-cdc-dark border border-cdc-olive/30 rounded-2xl overflow-hidden flex flex-col animate-scale-in",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-cdc-olive/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-cdc-lime/20 flex items-center justify-center",children:e.jsx(U,{className:"text-cdc-lime",size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-display text-2xl text-cdc-cream",children:"OCR DOCUMENT READER"}),e.jsx("p",{className:"text-sm text-cdc-cream/50",children:"Extract data from PDFs and Excel files"})]})]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-cdc-olive/30 rounded-lg transition-colors",children:e.jsx(B,{className:"text-cdc-cream/60",size:24})})]}),e.jsx("div",{className:"flex-1 overflow-auto p-6",children:v.length===0?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`upload-zone text-center ${z?"upload-zone-active":""}`,onDragEnter:D,onDragLeave:D,onDragOver:D,onDrop:F,onClick:()=>{var a;return(a=A.current)==null?void 0:a.click()},children:[e.jsx("input",{ref:A,type:"file",multiple:!0,accept:".pdf,.xlsx,.xls,.csv",onChange:V,className:"hidden"}),e.jsx(us,{className:"mx-auto text-cdc-lime/60 mb-4",size:48}),e.jsx("p",{className:"text-cdc-cream text-lg font-medium mb-2",children:"Drop files here or click to upload"}),e.jsx("p",{className:"text-cdc-cream/50 text-sm",children:"Supports PDF, Excel (.xlsx, .xls), and CSV files"})]}),l.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-medium text-cdc-cream/70",children:["Selected Files (",l.length,")"]}),l.map((a,h)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-cdc-olive/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[a.type==="application/pdf"?e.jsx($,{className:"text-red-400",size:20}):e.jsx(Ne,{className:"text-green-400",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-cdc-cream font-medium",children:a.name}),e.jsxs("p",{className:"text-cdc-cream/50 text-xs",children:[(a.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx("button",{onClick:()=>T(h),className:"p-2 hover:bg-red-500/20 rounded-lg transition-colors",children:e.jsx(X,{className:"text-red-400",size:16})})]},h))]}),m&&e.jsxs("div",{className:"p-6 bg-cdc-olive/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-cdc-cream font-medium",children:"Processing files..."}),e.jsxs("span",{className:"text-cdc-lime font-bold",children:[y,"%"]})]}),e.jsx("div",{className:"progress-bar",children:e.jsx("div",{className:"progress-fill",style:{width:`${y}%`}})}),e.jsx("div",{className:"mt-4 flex items-center justify-center",children:e.jsxs("div",{className:"relative w-16 h-16",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-cdc-olive/30 rounded-full"}),e.jsx("div",{className:"absolute inset-0 border-4 border-cdc-lime rounded-full animate-spin border-t-transparent"}),e.jsx(U,{className:"absolute inset-0 m-auto text-cdc-lime",size:24})]})})]})]}):e.jsxs("div",{className:"grid grid-cols-3 gap-6 h-full",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-medium text-cdc-cream/70 mb-4",children:"Processed Files"}),v.map((a,h)=>e.jsx("button",{onClick:()=>k(h),className:`w-full text-left p-4 rounded-lg transition-all ${p===h?"bg-cdc-lime/20 border border-cdc-lime/40":"bg-cdc-olive/20 border border-transparent hover:border-cdc-olive/40"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[a.status==="success"?e.jsx(be,{className:"text-green-400",size:16}):e.jsx(Q,{className:"text-red-400",size:16}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-cdc-cream font-medium truncate",children:a.fileName}),e.jsxs("p",{className:"text-cdc-cream/50 text-xs",children:[(a.fileSize/1024).toFixed(1)," KB"]})]})]})},h)),e.jsxs("button",{onClick:()=>{C([]),d([]),k(null)},className:"w-full btn-secondary flex items-center justify-center gap-2 mt-4",children:[e.jsx(I,{size:18}),"Process More Files"]})]}),e.jsx("div",{className:"col-span-2 bg-cdc-olive/10 rounded-xl p-6 overflow-auto",children:p!==null&&v[p]&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-display text-cdc-cream",children:v[p].fileName}),e.jsxs("button",{onClick:()=>M(v[p]),className:"btn-primary flex items-center gap-2",children:[e.jsx(I,{size:16}),"Create Data Card"]})]}),v[p].status==="success"?e.jsxs("div",{className:"space-y-6",children:[v[p].data.text&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-cdc-cream/70 mb-3",children:"Extracted Text"}),e.jsx("pre",{className:"bg-cdc-dark/50 p-4 rounded-lg text-sm text-cdc-cream/80 whitespace-pre-wrap font-mono",children:v[p].data.text})]}),v[p].data.tables&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-cdc-cream/70 mb-3",children:"Extracted Tables"}),v[p].data.tables.map((a,h)=>e.jsxs("div",{className:"bg-cdc-dark/50 rounded-lg overflow-hidden mb-4",children:[e.jsx("div",{className:"px-4 py-2 bg-cdc-olive/30 border-b border-cdc-olive/20",children:e.jsx("span",{className:"text-sm font-medium text-cdc-cream",children:a.name})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsx("tr",{className:"border-b border-cdc-olive/20",children:a.headers.map((r,j)=>e.jsx("th",{className:"table-header",children:r},j))})}),e.jsx("tbody",{children:a.rows.map((r,j)=>e.jsx("tr",{className:"table-row",children:r.map((R,O)=>e.jsx("td",{className:"table-cell",children:R},O))},j))})]})})]},h))]}),v[p].data.data&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-cdc-cream/70 mb-3",children:"Sheet Data"}),Object.entries(v[p].data.data).map(([a,h])=>e.jsxs("div",{className:"bg-cdc-dark/50 rounded-lg overflow-hidden mb-4",children:[e.jsx("div",{className:"px-4 py-2 bg-cdc-olive/30 border-b border-cdc-olive/20",children:e.jsx("span",{className:"text-sm font-medium text-cdc-cream",children:a})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsx("tr",{className:"border-b border-cdc-olive/20",children:h.headers.map((r,j)=>e.jsx("th",{className:"table-header",children:r},j))})}),e.jsx("tbody",{children:h.rows.map((r,j)=>e.jsx("tr",{className:"table-row",children:r.map((R,O)=>e.jsx("td",{className:"table-cell",children:R},O))},j))})]})})]},a))]})]}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Q,{className:"mx-auto text-red-400 mb-4",size:48}),e.jsx("p",{className:"text-red-400 font-medium",children:"Processing Failed"}),e.jsx("p",{className:"text-cdc-cream/50 text-sm mt-2",children:v[p].error})]})})]})})]})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-cdc-olive/20",children:[e.jsxs("p",{className:"text-cdc-cream/50 text-sm",children:[l.length," file",l.length!==1?"s":""," selected"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:c,className:"btn-ghost",children:"Cancel"}),l.length>0&&v.length===0&&e.jsxs("button",{onClick:i,disabled:m,className:"btn-primary flex items-center gap-2",children:[m?e.jsx(we,{className:"animate-spin",size:18}):e.jsx(U,{size:18}),"Process Files"]})]})]})]})})},gs=({cards:t,onSave:c,onDelete:l,onClose:d})=>{const[m,o]=x.useState(null),[y,b]=x.useState(t||[]),[v,C]=x.useState(!1),[p,k]=x.useState({title:"",category:"financial",fields:[{key:"",value:""}]}),z=[{id:"financial",label:"Financial",icon:ee,color:"text-green-400"},{id:"operational",label:"Operational",icon:Z,color:"text-blue-400"},{id:"customer",label:"Customer",icon:Ce,color:"text-purple-400"},{id:"inventory",label:"Inventory",icon:G,color:"text-orange-400"},{id:"other",label:"Other",icon:ds,color:"text-gray-400"}],E=(i=null)=>{if(i!==null){const n=[...y];n[i].fields.push({key:"",value:""}),b(n)}else k(n=>({...n,fields:[...n.fields,{key:"",value:""}]}))},A=(i,n)=>{if(i!==null){const g=[...y];g[i].fields=g[i].fields.filter((M,a)=>a!==n),b(g)}else k(g=>({...g,fields:g.fields.filter((M,a)=>a!==n)}))},D=(i,n,g,M)=>{if(i!==null){const a=[...y];a[i].fields[n][g]=M,b(a)}else k(a=>({...a,fields:a.fields.map((h,r)=>r===n?{...h,[g]:M}:h)}))},F=i=>{c&&c(y[i]),o(null)},V=()=>{const i={...p,id:Date.now().toString(),createdAt:new Date().toISOString()};b(n=>[...n,i]),c&&c(i),k({title:"",category:"financial",fields:[{key:"",value:""}]}),C(!1)},T=i=>{const n=y[i];b(g=>g.filter((M,a)=>a!==i)),l&&n.id&&l(n.id)};return e.jsx("div",{className:"fixed inset-0 bg-cdc-dark/95 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-6xl max-h-[90vh] bg-cdc-dark border border-cdc-olive/30 rounded-2xl overflow-hidden flex flex-col animate-scale-in",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-cdc-olive/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-cdc-lime/20 flex items-center justify-center",children:e.jsx(J,{className:"text-cdc-lime",size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-display text-2xl text-cdc-cream",children:"DATA CARDS EDITOR"}),e.jsx("p",{className:"text-sm text-cdc-cream/50",children:"Manage and edit extracted data"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>C(!0),className:"btn-primary flex items-center gap-2",children:[e.jsx(I,{size:18}),"New Card"]}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-cdc-olive/30 rounded-lg transition-colors",children:e.jsx(B,{className:"text-cdc-cream/60",size:24})})]})]}),e.jsxs("div",{className:"flex-1 overflow-auto p-6",children:[v&&e.jsxs("div",{className:"mb-6 p-6 bg-cdc-olive/20 rounded-xl border border-cdc-lime/20 animate-slide-down",children:[e.jsx("h3",{className:"text-lg font-medium text-cdc-cream mb-4",children:"Create New Data Card"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cdc-cream/70 mb-2",children:"Card Title"}),e.jsx("input",{type:"text",value:p.title,onChange:i=>k(n=>({...n,title:i.target.value})),placeholder:"e.g., FY24 Revenue Summary",className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-cdc-cream/70 mb-2",children:"Category"}),e.jsx("select",{value:p.category,onChange:i=>k(n=>({...n,category:i.target.value})),className:"input-field",children:z.map(i=>e.jsx("option",{value:i.id,children:i.label},i.id))})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-sm font-medium text-cdc-cream/70",children:"Data Fields"}),e.jsxs("button",{onClick:()=>E(),className:"text-cdc-lime text-sm hover:underline flex items-center gap-1",children:[e.jsx(I,{size:14}),"Add Field"]})]}),e.jsx("div",{className:"space-y-2",children:p.fields.map((i,n)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:i.key,onChange:g=>D(null,n,"key",g.target.value),placeholder:"Field name",className:"input-field flex-1"}),e.jsx("input",{type:"text",value:i.value,onChange:g=>D(null,n,"value",g.target.value),placeholder:"Value",className:"input-field flex-1"}),p.fields.length>1&&e.jsx("button",{onClick:()=>A(null,n),className:"p-3 hover:bg-red-500/20 rounded-lg transition-colors",children:e.jsx(X,{className:"text-red-400",size:16})})]},n))})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>C(!1),className:"btn-ghost",children:"Cancel"}),e.jsx("button",{onClick:V,disabled:!p.title||p.fields.every(i=>!i.key),className:"btn-primary",children:"Create Card"})]})]}),y.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[e.jsx(G,{className:"text-cdc-cream/20 mb-4",size:64}),e.jsx("p",{className:"text-cdc-cream/60 text-lg mb-2",children:"No data cards yet"}),e.jsx("p",{className:"text-cdc-cream/40 text-sm mb-4",children:"Create a new card or extract data from documents"}),e.jsxs("button",{onClick:()=>C(!0),className:"btn-primary flex items-center gap-2",children:[e.jsx(I,{size:18}),"Create First Card"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map((i,n)=>{var h;const g=z.find(r=>r.id===i.category)||z[4],M=g.icon,a=m===n;return e.jsxs("div",{className:"data-card",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-cdc-olive/20 border-b border-cdc-lime/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:g.color,size:18}),a?e.jsx("input",{type:"text",value:i.title,onChange:r=>{const j=[...y];j[n].title=r.target.value,b(j)},className:"bg-transparent border-b border-cdc-lime/30 text-cdc-cream font-medium focus:outline-none"}):e.jsx("span",{className:"text-cdc-cream font-medium",children:i.title})]}),e.jsx("div",{className:"flex items-center gap-1",children:a?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>F(n),className:"p-2 hover:bg-green-500/20 rounded-lg transition-colors",children:e.jsx(be,{className:"text-green-400",size:16})}),e.jsx("button",{onClick:()=>o(null),className:"p-2 hover:bg-cdc-olive/30 rounded-lg transition-colors",children:e.jsx(B,{className:"text-cdc-cream/60",size:16})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>o(n),className:"p-2 hover:bg-cdc-olive/30 rounded-lg transition-colors",children:e.jsx(J,{className:"text-cdc-cream/60",size:16})}),e.jsx("button",{onClick:()=>T(n),className:"p-2 hover:bg-red-500/20 rounded-lg transition-colors",children:e.jsx(X,{className:"text-red-400",size:16})})]})})]}),e.jsxs("div",{className:"p-4 space-y-3",children:[(h=i.fields)==null?void 0:h.map((r,j)=>e.jsx("div",{className:"flex items-center justify-between",children:a?e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx("input",{type:"text",value:r.key,onChange:R=>D(n,j,"key",R.target.value),className:"bg-cdc-dark/50 border border-cdc-olive/30 rounded px-2 py-1 text-sm text-cdc-cream/70 flex-1"}),e.jsx("input",{type:"text",value:r.value,onChange:R=>D(n,j,"value",R.target.value),className:"bg-cdc-dark/50 border border-cdc-olive/30 rounded px-2 py-1 text-sm text-cdc-cream flex-1"}),e.jsx("button",{onClick:()=>A(n,j),className:"p-1 hover:bg-red-500/20 rounded transition-colors",children:e.jsx(B,{className:"text-red-400",size:14})})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm text-cdc-cream/50",children:r.key}),e.jsx("span",{className:"text-sm text-cdc-cream font-medium",children:r.value})]})},j)),a&&e.jsxs("button",{onClick:()=>E(n),className:"w-full py-2 border border-dashed border-cdc-olive/30 rounded-lg text-cdc-cream/50 text-sm hover:border-cdc-lime/30 hover:text-cdc-lime transition-colors flex items-center justify-center gap-2",children:[e.jsx(I,{size:14}),"Add Field"]})]}),e.jsx("div",{className:"px-4 py-2 bg-cdc-dark/30 border-t border-cdc-olive/10",children:e.jsx("span",{className:`badge ${g.color.replace("text-","bg-").replace("400","500/20")} ${g.color}`,children:g.label})})]},i.id||n)})})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-cdc-olive/20",children:[e.jsxs("p",{className:"text-cdc-cream/50 text-sm",children:[y.length," data card",y.length!==1?"s":""]}),e.jsx("button",{onClick:d,className:"btn-secondary",children:"Done"})]})]})})},bs=({user:t,isAdmin:c})=>{var R,O;const[l,d]=x.useState("overview"),[m,o]=x.useState(!1),[y,b]=x.useState(!1),[v,C]=x.useState([]),[p,k]=x.useState([]),[z,E]=x.useState([]),[A,D]=x.useState([]),[F,V]=x.useState(!0),[T]=x.useState(Date.now()),[i,n]=x.useState({});x.useEffect(()=>{const s=setInterval(()=>{n(u=>({...u,[l]:(u[l]||0)+1}))},1e3);return()=>clearInterval(s)},[l]),x.useEffect(()=>{(async()=>{try{const u=await js(),w=await fs();if(await Qe(t.uid,{email:t.email,location:u,fingerprint:w,userAgent:navigator.userAgent,startTime:new Date().toISOString()}),c){const[N,S,L]=await Promise.all([Je(),Xe(),de()]);k(N),E(S),C(L)}else{const N=await de();C(N)}await g()}catch(u){console.error("Error loading data:",u)}finally{V(!1)}})()},[t,c]);const g=async()=>{const s=[];for(const[u,w]of Object.entries(re))try{const S=await(await fetch(`https://www.googleapis.com/drive/v3/files?q='${w}'+in+parents&key=${We}&fields=files(id,name,mimeType,modifiedTime,size,webViewLink)`)).json();S.files&&s.push(...S.files.map(L=>({...L,folder:u})))}catch(N){console.error(`Error fetching ${u}:`,N)}D(s)},M=async s=>{var w,N;const u={title:s.fileName,category:s.fileType==="application/pdf"?"financial":"operational",fields:((N=(w=s.data.tables)==null?void 0:w[0])==null?void 0:N.rows.map(S=>({key:S[0],value:S.slice(1).join(" | ")})))||[{key:"Source",value:s.fileName}],sourceFile:s.fileName,extractedAt:s.extractedAt};try{const S=await ne(u);C(L=>[...L,{...u,id:S}])}catch(S){console.error("Error saving card:",S)}o(!1),b(!0)},a=async s=>{try{if(s.id)await es(s.id,s);else{const u=await ne(s);C(w=>w.map(N=>N===s?{...N,id:u}:N))}}catch(u){console.error("Error saving card:",u)}},h=async s=>{try{await ss(s),C(u=>u.filter(w=>w.id!==s))}catch(u){console.error("Error deleting card:",u)}},r=async()=>{const s=Math.floor((Date.now()-T)/1e3);await ie(t.uid,{type:"logout",duration:s,sectionTime:i}),await Ze()},j=[{id:"overview",label:"Overview",icon:ns},{id:"financials",label:"Financials",icon:ee},{id:"stores",label:"Stores",icon:pe},{id:"documents",label:"Documents",icon:xe},...c?[{id:"admin",label:"Admin Panel",icon:ps},{id:"investors",label:"Investors",icon:Ce},{id:"activity",label:"Activity Log",icon:Z}]:[]];return F?e.jsx("div",{className:"min-h-screen bg-cdc-dark flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"spinner w-12 h-12 mx-auto mb-4"}),e.jsx("p",{className:"text-cdc-cream/60",children:"Loading dashboard..."})]})}):e.jsxs("div",{className:"min-h-screen bg-cdc-dark bg-pattern",children:[e.jsxs("aside",{className:"fixed left-0 top-0 h-full w-64 bg-cdc-dark/90 border-r border-cdc-olive/20 z-40",children:[e.jsx("div",{className:"p-6 border-b border-cdc-olive/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-cdc-lime to-cdc-lime-dark flex items-center justify-center",children:e.jsx("span",{className:"font-display text-xl text-cdc-dark",children:"CDC"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-display text-xl text-cdc-cream",children:"CREPDOG"}),e.jsx("p",{className:"text-xs text-cdc-cream/40",children:"Investor Portal"})]})]})}),e.jsx("nav",{className:"p-4 space-y-1",children:j.map(s=>{const u=s.icon;return e.jsxs("button",{onClick:()=>d(s.id),className:`sidebar-item w-full ${l===s.id?"sidebar-item-active":""}`,children:[e.jsx(u,{size:18}),e.jsx("span",{children:s.label}),i[s.id]>0&&e.jsx("span",{className:"ml-auto text-xs text-cdc-cream/40",children:fe(i[s.id])})]},s.id)})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-cdc-olive/20",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>o(!0),className:"w-full btn-secondary flex items-center justify-center gap-2 py-2",children:[e.jsx(U,{size:16}),"OCR Reader"]}),e.jsxs("button",{onClick:()=>b(!0),className:"w-full btn-ghost flex items-center justify-center gap-2 py-2 border border-cdc-olive/30",children:[e.jsx(J,{size:16}),"Data Cards"]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-cdc-olive/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-cdc-olive/30 flex items-center justify-center",children:e.jsx(ke,{size:16,className:"text-cdc-cream/60"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-cdc-cream truncate",children:t.email}),e.jsx("p",{className:"text-xs text-cdc-cream/40",children:c?"Admin":"Investor"})]})]}),e.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center gap-2 py-2 text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:[e.jsx(os,{size:16}),"Sign Out"]})]})]})]}),e.jsxs("main",{className:"ml-64 p-8",children:[e.jsxs("header",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-display text-3xl text-cdc-cream",children:((R=j.find(s=>s.id===l))==null?void 0:R.label)||"Dashboard"}),e.jsxs("p",{className:"text-cdc-cream/50 mt-1",children:["Welcome back, ",t.displayName||((O=t.email)==null?void 0:O.split("@")[0])]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-cdc-olive/20 rounded-lg",children:[e.jsx(ls,{size:16,className:"text-cdc-lime"}),e.jsxs("span",{className:"text-sm text-cdc-cream/60",children:["Session: ",fe(Math.floor((Date.now()-T)/1e3))]})]}),e.jsx("button",{onClick:g,className:"p-2 hover:bg-cdc-olive/30 rounded-lg transition-colors",children:e.jsx(hs,{size:20,className:"text-cdc-cream/60"})})]})]}),l==="overview"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Revenue FY24",value:"₹18.2 Cr",change:"+114%",icon:ee,color:"text-green-400"},{label:"LTV:CAC Ratio",value:"62:1",change:"Excellent",icon:xs,color:"text-blue-400"},{label:"Active Stores",value:"3",change:"Delhi, Mumbai, Hyd",icon:pe,color:"text-purple-400"},{label:"Total Documents",value:A.length.toString(),change:"Synced",icon:xe,color:"text-orange-400"}].map((s,u)=>{const w=s.icon;return e.jsxs("div",{className:"card animate-slide-up",style:{animationDelay:`${u*.1}s`},children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-cdc-cream/60 text-sm",children:s.label}),e.jsx(w,{className:s.color,size:20})]}),e.jsx("p",{className:"text-2xl font-bold text-cdc-cream",children:s.value}),e.jsx("p",{className:`text-sm mt-1 ${s.color}`,children:s.change})]},u)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"text-lg font-medium text-cdc-cream mb-4 flex items-center gap-2",children:[e.jsx($,{size:18,className:"text-cdc-lime"}),"Recent Documents"]}),e.jsx("div",{className:"space-y-3",children:A.slice(0,5).map((s,u)=>e.jsxs("a",{href:s.webViewLink,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between p-3 bg-cdc-dark/30 rounded-lg hover:bg-cdc-olive/20 transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($,{size:16,className:"text-cdc-cream/40"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-cdc-cream group-hover:text-cdc-lime transition-colors",children:s.name}),e.jsx("p",{className:"text-xs text-cdc-cream/40",children:s.folder})]})]}),e.jsx(me,{size:14,className:"text-cdc-cream/40 group-hover:text-cdc-lime transition-colors"})]},s.id))})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"text-lg font-medium text-cdc-cream mb-4 flex items-center gap-2",children:[e.jsx(G,{size:18,className:"text-cdc-lime"}),"Data Cards"]}),v.length>0?e.jsxs("div",{className:"space-y-3",children:[v.slice(0,3).map((s,u)=>{var w;return e.jsxs("div",{className:"p-3 bg-cdc-dark/30 rounded-lg",children:[e.jsx("p",{className:"text-sm text-cdc-cream font-medium",children:s.title}),e.jsx("div",{className:"mt-2 grid grid-cols-2 gap-2",children:(w=s.fields)==null?void 0:w.slice(0,2).map((N,S)=>e.jsxs("div",{className:"text-xs",children:[e.jsxs("span",{className:"text-cdc-cream/40",children:[N.key,": "]}),e.jsx("span",{className:"text-cdc-cream",children:N.value})]},S))})]},s.id||u)}),e.jsx("button",{onClick:()=>b(!0),className:"w-full py-2 text-cdc-lime text-sm hover:underline",children:"View All Cards →"})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(G,{size:32,className:"mx-auto text-cdc-cream/20 mb-2"}),e.jsx("p",{className:"text-cdc-cream/40 text-sm",children:"No data cards yet"}),e.jsx("button",{onClick:()=>o(!0),className:"mt-3 text-cdc-lime text-sm hover:underline",children:"Extract from documents →"})]})]})]})]}),l==="documents"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("div",{className:"flex gap-2",children:Object.keys(re).map(s=>e.jsx("button",{className:"px-4 py-2 bg-cdc-olive/20 hover:bg-cdc-olive/30 rounded-lg text-sm text-cdc-cream/70 hover:text-cdc-cream transition-colors",children:s.replace(/_/g," ")},s))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:A.map((s,u)=>{var w,N,S,L;return e.jsx("a",{href:s.webViewLink,target:"_blank",rel:"noopener noreferrer",className:"card-interactive animate-slide-up",style:{animationDelay:`${u*.05}s`},onClick:()=>ie(t.uid,{type:"file_view",fileName:s.name,fileId:s.id}),children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-cdc-olive/30 flex items-center justify-center flex-shrink-0",children:(w=s.mimeType)!=null&&w.includes("pdf")?e.jsx($,{className:"text-red-400",size:24}):(N=s.mimeType)!=null&&N.includes("spreadsheet")||(S=s.mimeType)!=null&&S.includes("excel")?e.jsx(Ne,{className:"text-green-400",size:24}):(L=s.mimeType)!=null&&L.includes("presentation")?e.jsx(oe,{className:"text-orange-400",size:24}):e.jsx($,{className:"text-cdc-cream/40",size:24})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-cdc-cream font-medium truncate",children:s.name}),e.jsx("p",{className:"text-xs text-cdc-cream/40 mt-1",children:s.folder.replace(/_/g," ")}),e.jsx("p",{className:"text-xs text-cdc-cream/30 mt-1",children:s.modifiedTime&&new Date(s.modifiedTime).toLocaleDateString()})]}),e.jsx(me,{size:16,className:"text-cdc-cream/30"})]})},s.id)})})]}),l==="admin"&&c&&e.jsx("div",{className:"space-y-6 animate-fade-in",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-medium text-cdc-cream mb-2",children:"Total Sessions"}),e.jsx("p",{className:"text-3xl font-bold text-cdc-lime",children:p.length})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-medium text-cdc-cream mb-2",children:"Unique Investors"}),e.jsx("p",{className:"text-3xl font-bold text-cdc-lime",children:new Set(p.map(s=>s.email)).size})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"text-lg font-medium text-cdc-cream mb-2",children:"Activities Logged"}),e.jsx("p",{className:"text-3xl font-bold text-cdc-lime",children:z.length})]})]})}),l==="investors"&&c&&e.jsx("div",{className:"card animate-fade-in",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-cdc-olive/20",children:[e.jsx("th",{className:"table-header",children:"Email"}),e.jsx("th",{className:"table-header",children:"Location"}),e.jsx("th",{className:"table-header",children:"Device"}),e.jsx("th",{className:"table-header",children:"Session Start"})]})}),e.jsx("tbody",{children:p.map((s,u)=>{var w,N,S;return e.jsxs("tr",{className:"table-row",children:[e.jsx("td",{className:"table-cell",children:s.email}),e.jsxs("td",{className:"table-cell",children:[(w=s.location)==null?void 0:w.city,", ",(N=s.location)==null?void 0:N.country]}),e.jsxs("td",{className:"table-cell text-xs truncate max-w-xs",children:[(S=s.userAgent)==null?void 0:S.slice(0,50),"..."]}),e.jsx("td",{className:"table-cell",children:ue(s.createdAt)})]},s.id)})})]})})}),l==="activity"&&c&&e.jsx("div",{className:"card animate-fade-in",children:e.jsx("div",{className:"space-y-3",children:z.map((s,u)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-cdc-dark/30 rounded-lg",children:[e.jsx(Z,{className:"text-cdc-lime",size:16}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-cdc-cream",children:s.type}),s.fileName&&e.jsxs("p",{className:"text-xs text-cdc-cream/40",children:["File: ",s.fileName]})]}),e.jsx("span",{className:"text-xs text-cdc-cream/40",children:ue(s.timestamp)})]},s.id))})}),(l==="financials"||l==="stores")&&e.jsx("div",{className:"card animate-fade-in",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(oe,{className:"mx-auto text-cdc-cream/20 mb-4",size:64}),e.jsx("p",{className:"text-cdc-cream/60 text-lg mb-2",children:l==="financials"?"Financial Reports":"Store Analytics"}),e.jsx("p",{className:"text-cdc-cream/40 text-sm mb-4",children:"View detailed documents in the Documents section"}),e.jsx("button",{onClick:()=>d("documents"),className:"btn-primary",children:"View Documents"})]})})]}),m&&e.jsx(vs,{onDataExtracted:M,onClose:()=>o(!1)}),y&&e.jsx(gs,{cards:v,onSave:a,onDelete:h,onClose:()=>b(!1)})]})},Ns=()=>{var o;const[t,c]=x.useState(null),[l,d]=x.useState(!0);if(x.useEffect(()=>{const y=Oe(Y,b=>{c(b),d(!1)});return()=>y()},[]),l)return e.jsx("div",{className:"min-h-screen bg-cdc-dark flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"spinner w-12 h-12 mx-auto mb-4"}),e.jsx("p",{className:"text-cdc-cream/60",children:"Loading..."})]})});if(!t)return e.jsx(ys,{});const m=Ge.includes((o=t.email)==null?void 0:o.toLowerCase());return e.jsx(bs,{user:t,isAdmin:m})};K.createRoot(document.getElementById("root")).render(e.jsx(De.StrictMode,{children:e.jsx(Ns,{})}));
